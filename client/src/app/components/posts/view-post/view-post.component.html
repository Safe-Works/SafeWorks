<div class="loading-overlay" *ngIf="isLoading"></div>
<div class="loading-spinner" *ngIf="isLoading">
  <mat-spinner [diameter]="85"></mat-spinner>
</div>
<div>
  <h4 class="mb-4 text-muted">Serviço {{jobInfo.uid}}</h4>
  <div class="row">
    <div class="card-body">
      <div class="row col-md-12" style="padding: 40px 5.6%; background-color: white; border: 1px solid #ced0d4;">
        <h1 *ngIf="isError" class="error-text">Ops... Aconteceu um erro. Entre em contato com o suporte.</h1>
        <div class="container-fluid mt-5" *ngIf="!isError">
          <div class="row">
            <div class="col-md-5">
              <div class="carousel slide" data-bs-ride="carousel" id="carousel-1">
                <div class="carousel-inner">
                  <div class="carousel-item section-medias"
                    *ngFor="let photoUrl of jobInfo.media; let index = index; let isFirst = first"
                    [ngClass]="{active:isFirst}">
                    <img [src]="photoUrl" class="d-block w-100" style="max-width: 100%; height: auto;">
                  </div>
                </div>
                <div>
                  <button class="carousel-control-prev" href="#carousel-1" role="button" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                    <span class="sr-only" style="color: black;">Anterior</span>
                  </button>
                  <button class="carousel-control-next" href="#carousel-1" role="button" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                    <span class="sr-only" style="color: black;">Próximo</span>
                  </button>
                </div>
              </div>
            </div>
            <div class="col-md-7 container-info-job">
              <div class="row">
                <div class="col-md-9">
                  <h2 style="font-weight: 500;">{{ jobInfo.title }}</h2>
                </div>
                <div class="col-md-2 ">
                  <span class="tag-category">{{ jobInfo.category?.name }}</span>
                </div>
              </div>
              <div class="price">
                <span class="me-2" style="font-weight: 500;">R$&nbsp;{{ jobInfo.price }}</span>
              </div>
              <div class="d-flex flex-row">
                <div class="icons me-2">
                  <i class="fa fa-star"></i>
                  <i class="fa fa-star"></i>
                  <i class="fa fa-star"></i>
                  <i class="fa fa-star-half-o"></i>
                  <i class="fa fa-star-o"></i>
                </div>
                <span>
                  10 avaliações
                </span>
              </div>
              <hr>
              <div class="align-items-center">
                <h6 style="margin: 0; font-weight: 401;">DESCRIÇÃO</h6><br>
                <p>{{ jobInfo.description }}</p>
              </div>
              <div class="d-flex align-items-center mt-5 delivery">
                <i class="fa fa-map-marker"></i>
                <span class="ms-2">
                  {{ jobInfo.district?.name }}<br>
                </span>
                <span class="ms-2 me-2">
                  |
                </span>
                <span class="ms-2 me-2 text-success" *ngIf="!jobInfo.displacement_fee">
                  GRÁTIS<br>
                </span>
                <span class="ms-2 me-2" *ngIf="jobInfo.displacement_fee">
                  <i class="fa fa-bus"></i>
                  R$ {{ jobInfo.displacement_fee }}<br>
                </span>
              </div>
              <hr>
              <div class="mt-3">
                <span class="fw-bold">
                  Anunciante:
                </span>

                <a (click)="redirectToUserDetails()" class="nome-link">
                  <span class="ms-2">
                  {{ jobInfo.worker?.name }}
                </span>
                </a>
              </div>
              <div class="mt-3">
                <a class="btn btn-dark me-2" (click)="back()" type="button">
                  Voltar
                </a>
                <button (click)="contractJob()" class="btn btn-success" type="button" *ngIf="!isMyAdvertisement">
                  Contratar
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>